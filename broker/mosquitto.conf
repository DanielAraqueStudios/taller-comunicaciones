# Configuración del Broker MQTT para Taller Comunicaciones
# Universidad Militar Nueva Granada

# ============================================
# LISTENER CONFIGURATION
# ============================================
# Puerto estándar MQTT
listener 1883
protocol mqtt

# Puerto WebSocket (opcional)
listener 9001
protocol websockets

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Permitir conexiones anónimas (cambiar a false para producción)
allow_anonymous true

# Descomentar para habilitar autenticación
# allow_anonymous false
# password_file /mosquitto/config/passwd

# ============================================
# PERSISTENCE CONFIGURATION
# ============================================
# Habilitar persistencia de mensajes
persistence true
persistence_location /mosquitto/data/

# Archivo de persistencia
autosave_interval 1800
autosave_on_changes false

# ============================================
# LOGGING CONFIGURATION
# ============================================
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Tipos de log
log_type error
log_type warning
log_type notice
log_type information

# Incluir timestamp en logs
log_timestamp true
log_timestamp_format %Y-%m-%d %H:%M:%S

# ============================================
# MESSAGE CONFIGURATION
# ============================================
# Tamaño máximo del mensaje (10 MB)
message_size_limit 10485760

# Máximo de mensajes en cola por cliente
max_queued_messages 1000

# ============================================
# CONNECTION CONFIGURATION
# ============================================
# Mantener conexión activa
max_keepalive 65535

# Máximo de conexiones
max_connections -1

# ============================================
# NOTES
# ============================================
# Para habilitar autenticación:
# 1. Crear usuarios: mosquitto_passwd -c /mosquitto/config/passwd usuario1
# 2. Cambiar allow_anonymous a false
# 3. Descomentar password_file
# 4. Reiniciar el servicio
